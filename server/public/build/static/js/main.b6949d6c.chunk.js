(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(79)},35:function(e,t,n){},37:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},38:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(28),i=n.n(r),s=(n(35),n(4)),o=n(2),u=n(3),l=n(6),h=n(5),m=n(7),f=n(84),v=n(83),p=n(80),d=(n(37),n(38),n(15)),g=n.n(d);n(14).config();var b=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){return t.service.post("/signup",e).then(function(e){return e.data})},this.login=function(e){return t.service.post("/login",e).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=g.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_API,"/auth"),withCredentials:!0})},E=(n(60),n(20));n(14).config();var O=function(){function e(){Object(o.a)(this,e),this.service=g.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_API),withCredentials:!0})}return Object(u.a)(e,[{key:"getCharacters",value:function(e){var t,n=e.id,a=Object(E.a)(e,["id"]);return t=n?"/".concat(n):Object.keys(a).reduce(function(e,t){return"".concat(e).concat(t,"=").concat(a[t])},"?"),this.service.get("/characters".concat(t," ")).then(function(e){return e.data}).catch(function(e){console.log(e)})}},{key:"getComics",value:function(e){var t,n=e.id,a=Object(E.a)(e,["id"]);return t=n?"/".concat(n):Object.keys(a).reduce(function(e,t){return"".concat(e).concat(t,"=").concat(a[t])},"?"),this.service.get("/comics".concat(t," ")).then(function(e){return e.data}).catch(function(e){console.log(e)})}},{key:"toggleComicFav",value:function(e){var t=e.userId,n=e.comicId,a=e.isFav,c="/".concat(n,"?op=").concat(a?"removeFav":"addFav","&userId=").concat(t);return this.service.patch("/comics".concat(c)).then(function(e){return console.log("apiservicetogglecomicfav",e)}).catch(function(e){console.log(e)})}}]),e}(),j=(n(62),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={character:null,user:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getCharacter",value:function(){this.setState(Object(s.a)({},this.state,{character:this.props.character}))}},{key:"componentDidMount",value:function(){this.getCharacter()}},{key:"render",value:function(){return this.state.character?c.a.createElement("div",null,c.a.createElement("h1",null,this.state.character.name),c.a.createElement("img",{src:this.state.character.img.path+"/portrait_uncanny."+this.state.character.img.extension,alt:this.state.name}),c.a.createElement("p",null,"favs: ",this.state.character.favs.length)):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component));n(14).config();var C=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).apiService=new O,e.state={characters:null,user:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getCharacters",value:function(e){var t=this;return this.apiService.getCharacters(e).then(function(e){return t.setState(Object(s.a)({},t.state,{characters:e}))}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.getCharacters(this.props.characters).then(function(){return e.setState(Object(s.a)({},e.state,{user:e.props.user}))}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.characters?c.a.createElement("div",{className:"characters-cards"},this.state.characters.map(function(e,t){return c.a.createElement(j,{character:e,key:t})})):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component),y=(n(64),n(66),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={comic:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getComic",value:function(){this.setState(Object(s.a)({},this.state,{comic:this.props.comic}))}},{key:"componentDidMount",value:function(){this.getComic()}},{key:"render",value:function(){return this.state.comic?c.a.createElement("div",null,c.a.createElement("h1",null,this.state.comic.title),c.a.createElement("img",{src:this.state.comic.thumbnail.path+"/portrait_uncanny."+this.state.comic.thumbnail.extension,alt:this.state.name})):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component));n(14).config();var S=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).apiService=new O,e.state={comics:null,user:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getComics",value:function(e){var t=this;return this.apiService.getComics(e).then(function(e){return t.setState(Object(s.a)({},t.state,{comics:e}))}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.getComics(this.props.comics).then(function(){return e.setState(Object(s.a)({},e.state,{user:e.props.user}))}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.comics?c.a.createElement("div",{className:"comics-cards"},this.state.comics.map(function(e,t){return c.a.createElement(y,{comic:e,key:t})})):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component),k=n(13),w=n(82),U=(n(68),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,c=n.password,r=n.mail;e.authService.signup({username:a,password:c,mail:r}).then(function(t){e.props.getUser(t),e.setState({username:"",password:"",mail:"",redirect:!0})})},e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(k.a)({},a,c))},e.state={username:"",password:"",mail:"",redirect:!1},e.authService=new b,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state&&this.state.redirect?c.a.createElement(w.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement("h2",null,"Signup"),c.a.createElement("form",{onSubmit:this.handleFormSubmit},c.a.createElement("label",null,"Username"),c.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),c.a.createElement("label",null,"Mail"),c.a.createElement("input",{type:"mail",name:"mail",onChange:function(t){return e.handleChange(t)}}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),c.a.createElement("input",{type:"submit",value:"Signup"})))}}]),t}(a.Component)),F=(n(73),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,c=n.password;e.authService.login({username:a,password:c}).then(function(t){return e.props.getUser(t)})},e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(k.a)({},a,c))},e.state={username:"",password:""},e.authService=new b,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("h2",null,"Login"),c.a.createElement("form",{onSubmit:this.handleFormSubmit},c.a.createElement("label",null,"Username"),c.a.createElement("input",{type:"text",name:"username",onChange:function(t){return e.handleChange(t)}}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",name:"password",onChange:function(t){return e.handleChange(t)}}),c.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(a.Component)),L=(n(75),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={character:null,isfaved:!1},e.apiService=new O,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getCharacter",value:function(e){var t=this;return this.apiService.getCharacters({id:e}).then(function(e){return t.setState(Object(s.a)({},t.state,{character:e}))}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){this.getCharacter(this.props.match.params.id)}},{key:"render",value:function(){return this.state.character?c.a.createElement("div",null,c.a.createElement("h1",null,this.state.character.name),c.a.createElement("img",{src:this.state.character.img.path+"/portrait_uncanny."+this.state.character.img.extension,alt:this.state.name}),c.a.createElement("p",null,"Favs:",this.state.character.favs.length)):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component)),_=(n(77),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={comic:null,isFav:!1,user:null},e.apiService=new O,e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getComic",value:function(e){var t=this;return this.apiService.getComics({id:e}).then(function(e){var n=e.favs.includes(t.state.user._id);t.setState(Object(s.a)({},t.state,{comic:e,isFav:n}))}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object(s.a)({},this.state,{user:this.props.user}),function(){e.getComic(e.props.match.params.id).catch(function(e){return console.log(e)})})}},{key:"favHandler",value:function(){var e=this;return this.apiService.toggleComicFav({userId:this.state.user._id,comicId:this.state.comic.id,isFav:this.state.isFav}).then(function(){return e.getComic(e.state.comic.id)})}},{key:"render",value:function(){var e=this;return this.state.comic?c.a.createElement("div",null,c.a.createElement("h1",null,this.state.comic.name),c.a.createElement("img",{src:this.state.comic.thumbnail.path+"/portrait_uncanny."+this.state.comic.thumbnail.extension,alt:this.state.name}),c.a.createElement("p",null,"Favs:",this.state.comic.favs.length),c.a.createElement("p",null,this.state.isFav?"es favorito":"no es favorito"),c.a.createElement("button",{onClick:function(){return e.favHandler()}},this.state.isFav?"Ya no me gusta":"Me gusta")):c.a.createElement("div",null,c.a.createElement("p",null,"Loading..."))}}]),t}(a.Component)),D=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).fetchUser=function(){e.authService.loggedin().then(function(t){return e.setState(Object(s.a)({},e.state,{user:t}))})},e.getUser=function(t){e.setState(Object(s.a)({},e.state,{user:t}))},e.logout=function(){e.authService.logout().then(function(){return e.setState(Object(s.a)({},e.state,{user:null}))})},e.state={user:null},e.authService=new b,e.fetchUser(),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user?c.a.createElement("div",null,c.a.createElement("p",null,"Hola ",this.state.user.username),c.a.createElement("button",{onClick:this.logout},"Logout"),c.a.createElement(f.a,null,c.a.createElement(v.a,{path:"/cogetUser={this.getUser} mics",render:function(){return c.a.createElement(S,{getUser:e.getUser})}}),c.a.createElement(v.a,{path:"/characters/:id",render:function(t){return c.a.createElement(L,Object.assign({user:e.state.user},t))}}),c.a.createElement(v.a,{path:"/characters",render:function(){return c.a.createElement(C,{user:e.state.user,characters:{limit:"5",sortBy:"favs"}})}}),c.a.createElement(v.a,{path:"/comics/:id",render:function(t){return c.a.createElement(_,Object.assign({user:e.state.user},t))}}),c.a.createElement(v.a,{path:"/comics",render:function(){return c.a.createElement(S,{user:e.state.user,comics:{limit:"20",sortBy:"latest"}})}}))):c.a.createElement("div",null,c.a.createElement("p",null,"No user"),c.a.createElement(p.a,{to:"/"},"Home")," - ",c.a.createElement(p.a,{to:"/signup"},"Signup")," -"," ",c.a.createElement(p.a,{to:"/login"},"Login"));return c.a.createElement("div",{className:"App"},t,c.a.createElement(v.a,{path:"/signup",render:function(){return c.a.createElement(U,{getUser:e.getUser})}}),c.a.createElement(v.a,{path:"/login",render:function(){return c.a.createElement(F,{getUser:e.getUser})}}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(81);i.a.render(c.a.createElement(I.a,null,c.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.b6949d6c.chunk.js.map